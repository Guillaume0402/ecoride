# üå± EcoRide ‚Äì Plateforme de covoiturage √©cologique

**EcoRide** est une application web fullstack en PHP (Vanilla) avec architecture MVC moderne, con√ßue pour promouvoir le covoiturage responsable via une interface moderne et responsive.

---

## üîß Stack technique

| Front-end     | Back-end          | Base de donn√©es | DevOps & Outils           |
| ------------- | ----------------- | --------------- | ------------------------- |
| HTML5 / CSS3  | PHP 8.2 (Vanilla) | MySQL 8.0       | Docker + Docker Compose   |
| Bootstrap 5.3 | PDO / SQL         | phpMyAdmin      | Git + GitHub              |
| SASS          | Sessions PHP      |                 | npm (gestion d√©pendances) |
| JavaScript    | Architecture MVC  |                 | Sass (compilation CSS)    |

---

## ‚úÖ Fonctionnalit√©s principales

-   üîç **Recherche avanc√©e** : Covoiturages par ville, date et crit√®res
-   üß≠ **Affichage intelligent** : Trajets avec filtres et tri dynamique
-   üë§ **Authentification s√©curis√©e** : Connexion/inscription avec validation
-   üöó **Gestion v√©hicules** : Publication et gestion des trajets
-   üìã **Profils utilisateurs** : Syst√®me de cr√©dits et notation
-   üí≥ **Syst√®me de r√©servation** : Gestion des participations
-   üì± **Interface responsive** : Design adaptatif tous √©crans
-   üé® **UX moderne** : Animations CSS et interactions fluides

---

## üèóÔ∏è Architecture moderne

### Pattern Entity-Model-Controller

```
src/
‚îú‚îÄ‚îÄ Entity/              # Objets m√©tier (User, Covoiturage, Vehicle)
‚îú‚îÄ‚îÄ Model/               # Couche d'acc√®s aux donn√©es (UserModel, etc.)
‚îú‚îÄ‚îÄ Controller/          # Logique applicative (AuthController, etc.)
‚îú‚îÄ‚îÄ Db/                  # Singleton de connexion base de donn√©es
‚îú‚îÄ‚îÄ Routing/             # Router MVC custom
‚îî‚îÄ‚îÄ View/                # Templates et vues
```

### Singleton de base de donn√©es

```php
// Connexion unique et s√©curis√©e
$db = Mysql::getInstance();
$pdo = $db->getPDO();
```

### Entities typ√©es

```php
// Objets m√©tier avec validation
$user = new User('pseudo', 'email@domain.com');
$user->hashPassword('password');
$user->validate(); // Retourne les erreurs
```

---

## üê≥ Installation rapide (Docker recommand√©)

### 1. Pr√©requis

-   **Docker Desktop** (Recommand√©)
-   **Git**
-   **Node.js & npm** (pour SASS)

### 2. Installation compl√®te

```bash
# Clonage du projet
git clone https://github.com/votre-username/ecoride.git
cd ecoride

# Installation des d√©pendances frontend
npm install

# Compilation SASS
npm run sass:build

# Lancement de l'environnement Docker
docker-compose up -d

# V√©rification des services
docker-compose ps
```

### 3. Acc√®s aux services

| Service       | URL                      | Identifiants              |
| ------------- | ------------------------ | ------------------------- |
| **Application** | http://localhost:8080    | -                         |
| **phpMyAdmin**  | http://localhost:8081    | ecoride_user / ecoride_password |
| **Base de donn√©es** | localhost:3307       | ecoride_user / ecoride_password |

### 4. Services Docker

| Container          | Service | Port | Description                    |
| ------------------ | ------- | ---- | ------------------------------ |
| ecoride_web        | Web     | 8080 | Apache 2.4 + PHP 8.2          |
| ecoride_db         | MySQL   | 3307 | MySQL 8.0 + donn√©es initiales |
| ecoride_phpmyadmin | Admin   | 8081 | Interface de gestion BDD       |

---

## üé® D√©veloppement CSS/SASS

### Scripts de d√©veloppement

```bash
# D√©veloppement
npm run sass:watch         # Watch SASS en temps r√©el
npm run dev                # Mode d√©veloppement complet

# Production
npm run sass:build         # Compilation optimis√©e
npm run build              # Build complet

# Docker
docker-compose up -d       # D√©marrer les services
docker-compose down        # Stopper les services
docker-compose logs web    # Voir les logs
```

### Structure SASS organis√©e

```
assets/scss/
‚îú‚îÄ‚îÄ abstracts/
‚îÇ   ‚îú‚îÄ‚îÄ _variables.scss    # Variables globales
‚îÇ   ‚îú‚îÄ‚îÄ _mixins.scss       # Mixins r√©utilisables
‚îÇ   ‚îî‚îÄ‚îÄ _functions.scss    # Fonctions SASS
‚îú‚îÄ‚îÄ base/
‚îÇ   ‚îú‚îÄ‚îÄ _reset.scss        # Reset CSS
‚îÇ   ‚îú‚îÄ‚îÄ _typography.scss   # Polices et texte
‚îÇ   ‚îî‚îÄ‚îÄ _globals.scss      # Styles globaux
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ _buttons.scss      # Boutons
‚îÇ   ‚îú‚îÄ‚îÄ _forms.scss        # Formulaires
‚îÇ   ‚îú‚îÄ‚îÄ _modals.scss       # Modales
‚îÇ   ‚îî‚îÄ‚îÄ _cards.scss        # Cartes de contenu
‚îú‚îÄ‚îÄ layout/
‚îÇ   ‚îú‚îÄ‚îÄ _header.scss       # En-t√™te
‚îÇ   ‚îú‚îÄ‚îÄ _footer.scss       # Pied de page
‚îÇ   ‚îú‚îÄ‚îÄ _navigation.scss   # Navigation
‚îÇ   ‚îî‚îÄ‚îÄ _grid.scss         # Syst√®me de grille
‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îú‚îÄ‚îÄ _home.scss         # Page d'accueil
‚îÇ   ‚îú‚îÄ‚îÄ _auth.scss         # Pages de connexion
‚îÇ   ‚îî‚îÄ‚îÄ _dashboard.scss    # Tableau de bord
‚îî‚îÄ‚îÄ main.scss              # Point d'entr√©e principal
```

---

## üìÅ Architecture compl√®te du projet

```
ecoride/
‚îú‚îÄ‚îÄ üìÇ assets/
‚îÇ   ‚îî‚îÄ‚îÄ üìÇ scss/              # Sources SASS
‚îú‚îÄ‚îÄ üìÇ config/
‚îÇ   ‚îî‚îÄ‚îÄ app.php               # Configuration principale
‚îú‚îÄ‚îÄ üìÇ documentation/
‚îÇ   ‚îú‚îÄ‚îÄ mysql-database-guide.md
‚îÇ   ‚îî‚îÄ‚îÄ migration.md
‚îú‚îÄ‚îÄ üìÇ public/                # Point d'entr√©e web
‚îÇ   ‚îú‚îÄ‚îÄ index.php             # Router principal
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ assets/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ css/           # CSS compil√©
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ js/            # JavaScript
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÇ images/        # Ressources images
‚îú‚îÄ‚îÄ üìÇ src/
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ Controller/        # Contr√¥leurs MVC
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Controller.php    # Contr√¥leur de base
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AuthController.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UserController.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CovoiturageController.php
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ErrorController.php
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ Entity/            # Entit√©s m√©tier
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ User.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Covoiturage.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Vehicle.php
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Participation.php
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ Model/             # Couche d'acc√®s donn√©es
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UserModel.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CovoiturageModel.php
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ VehicleModel.php
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ Db/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Mysql.php         # Singleton PDO
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ Routing/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Router.php        # Router MVC custom
‚îÇ   ‚îî‚îÄ‚îÄ üìÇ View/              # Templates et vues
‚îÇ       ‚îú‚îÄ‚îÄ layout.php        # Layout principal
‚îÇ       ‚îú‚îÄ‚îÄ üìÇ partials/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ header.php
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ footer.php
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ navigation.php
‚îÇ       ‚îî‚îÄ‚îÄ üìÇ pages/
‚îÇ           ‚îú‚îÄ‚îÄ home.php
‚îÇ           ‚îú‚îÄ‚îÄ auth/
‚îÇ           ‚îú‚îÄ‚îÄ user/
‚îÇ           ‚îî‚îÄ‚îÄ covoiturage/
‚îú‚îÄ‚îÄ üìÇ docker/                # Configuration Docker
‚îú‚îÄ‚îÄ üìÑ docker-compose.yml     # Services Docker
‚îú‚îÄ‚îÄ üìÑ Dockerfile            # Image web custom
‚îú‚îÄ‚îÄ üìÑ init.sql              # Structure BDD
‚îú‚îÄ‚îÄ üìÑ package.json          # D√©pendances npm
‚îî‚îÄ‚îÄ üìÑ .env                  # Variables d'environnement
```

---

## üöÄ Architecture MVC moderne & Router

### Routing intelligent

Le syst√®me de routing analyse automatiquement les URLs et charge les contr√¥leurs appropri√©s :

```php
// src/Routing/Router.php
$router = new App\Routing\Router();
$router->handleRequest($_SERVER['REQUEST_URI']);

// Exemples d'URLs g√©r√©es :
// /                     ‚Üí PageController::home()
// /auth/login          ‚Üí AuthController::login()
// /user/profile        ‚Üí UserController::profile()
// /covoiturage/create  ‚Üí CovoiturageController::create()
```

### Contr√¥leurs avec injection de d√©pendances

```php
// Exemple : AuthController
namespace App\Controller;

use App\Entity\User;
use App\Model\UserModel;

class AuthController extends Controller 
{
    private UserModel $userModel;

    public function __construct() 
    {
        $this->userModel = new UserModel();
    }

    public function register(): void 
    {
        if ($_POST) {
            $user = new User($_POST['pseudo'], $_POST['email']);
            $user->hashPassword($_POST['password']);
            
            if ($this->userModel->save($user)) {
                $this->redirect('/auth/login?success=1');
            }
        }
        
        $this->render('auth/register');
    }
}
```

### Entities avec logique m√©tier

```php
// Entit√© User avec validation et logique m√©tier
$user = new User('JohnDoe', 'john@example.com');
$user->hashPassword('secret123');
$user->addCredits(50);
$user->updateNote(4.5);

// Validation avant sauvegarde
$errors = $user->validate();
if (empty($errors)) {
    $userModel->save($user);
}
```

---

## üéØ Fonctionnalit√©s d√©velopp√©es

### ‚úÖ Authentification compl√®te
-   **Inscription** : Validation c√¥t√© serveur et client
-   **Connexion** : Hash s√©curis√© des mots de passe
-   **Sessions** : Gestion des utilisateurs connect√©s
-   **R√¥les** : Visiteur, Utilisateur, Employ√©, Admin

### ‚úÖ Gestion des utilisateurs
-   **Profils** : Informations personnelles et pr√©f√©rences
-   **Cr√©dits** : Syst√®me de points pour les r√©servations
-   **Notation** : Syst√®me d'avis entre utilisateurs
-   **Avatar** : Upload et gestion des photos de profil

### ‚úÖ Syst√®me de covoiturage
-   **Publication** : Cr√©ation de trajets avec v√©hicule
-   **Recherche** : Filtres par ville, date, prix
-   **R√©servation** : Gestion des places disponibles
-   **Historique** : Suivi des trajets effectu√©s

### ‚úÖ Interface utilisateur
-   **Design responsive** : Mobile-first approach
-   **Modales interactives** : Login/Register seamless
-   **Notifications** : Feedback utilisateur en temps r√©el
-   **Animations** : Transitions CSS fluides

---

## üéØ Base de donn√©es optimis√©e

### Tables principales

```sql
-- Utilisateurs avec syst√®me de cr√©dits et notation
CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    pseudo VARCHAR(50) NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    password VARCHAR(255) NOT NULL,
    role_id INT DEFAULT 1,
    credits INT DEFAULT 20,
    note DECIMAL(4,2) DEFAULT 0.00,
    photo VARCHAR(255) NULL,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- Covoiturages avec gestion des places
CREATE TABLE covoiturages (
    id INT AUTO_INCREMENT PRIMARY KEY,
    chauffeur_id INT NOT NULL,
    vehicle_id INT NOT NULL,
    adresse_depart VARCHAR(255) NOT NULL,
    adresse_arrivee VARCHAR(255) NOT NULL,
    depart DATETIME NOT NULL,
    arrivee DATETIME NOT NULL,
    prix DECIMAL(10,2) NOT NULL,
    places_reservees INT DEFAULT 0,
    status ENUM('en_attente','demarre','termine','annule') DEFAULT 'en_attente',
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (chauffeur_id) REFERENCES users(id),
    FOREIGN KEY (vehicle_id) REFERENCES vehicles(id)
);

-- Participations avec syst√®me de validation
CREATE TABLE participations (
    id INT AUTO_INCREMENT PRIMARY KEY,
    covoiturage_id INT NOT NULL,
    passager_id INT NOT NULL,
    status ENUM('confirmee','annulee','en_attente_validation') DEFAULT 'confirmee',
    date_participation DATETIME DEFAULT CURRENT_TIMESTAMP,
    UNIQUE KEY unique_participation (covoiturage_id, passager_id),
    FOREIGN KEY (covoiturage_id) REFERENCES covoiturages(id),
    FOREIGN KEY (passager_id) REFERENCES users(id)
);
```

---

## üë®‚Äçüíª Workflow de d√©veloppement

### Branches Git organis√©es

```bash
main                    # üöÄ Production stable
develop                 # üß™ Int√©gration continue
feat/user-system       # ‚ú® Nouvelles fonctionnalit√©s
feat/covoiturage-crud  # ‚ú® CRUD covoiturages
fix/auth-validation    # üêõ Corrections de bugs
refactor/entity-model  # üîß Refactoring architecture
```

### Commits conventionnels

```bash
feat(auth): add user registration with validation
fix(db): resolve connection timeout in production
style(ui): improve responsive design for mobile
refactor(model): separate Entity from Model layer
docs(readme): update installation instructions
```

---

## üõ†Ô∏è Commandes utiles

### D√©veloppement quotidien

```bash
# D√©marrage rapide
docker-compose up -d && npm run sass:watch

# Tests et debugging
docker-compose logs -f web              # Logs en temps r√©el
docker-compose exec web bash            # Shell dans le container
docker-compose exec db mysql -u root -p # Acc√®s direct √† MySQL

# Maintenance
docker-compose down && docker-compose up -d  # Red√©marrage complet
docker system prune                          # Nettoyage Docker
```

### Base de donn√©es

```bash
# Backup
docker-compose exec db mysqldump -u ecoride_user -p ecoride_db > backup.sql

# Restore
docker-compose exec -T db mysql -u ecoride_user -p ecoride_db < backup.sql

# Reset complet
docker-compose down -v && docker-compose up -d
```

---

## üß™ Qualit√© & Bonnes pratiques

### Standards respect√©s
-   **PSR-4** : Autoloading des classes
-   **PSR-12** : Style de code PHP
-   **HTML5 & CSS3** : Validation W3C
-   **Responsive Design** : Mobile-first
-   **S√©curit√©** : Requ√™tes pr√©par√©es, validation, √©chappement

### S√©curit√© impl√©ment√©e
-   **Hash des mots de passe** : password_hash() / password_verify()
-   **Requ√™tes pr√©par√©es** : Protection contre l'injection SQL
-   **Validation** : C√¥t√© serveur et client
-   **Sessions s√©curis√©es** : Configuration hardened
-   **Variables d'environnement** : Pas de donn√©es sensibles en dur

---

## üìå Roadmap & Am√©liorations futures

### Phase 1 - Core Features ‚úÖ
-   [x] Architecture Entity/Model/Controller
-   [x] Syst√®me d'authentification
-   [x] CRUD utilisateurs
-   [x] Base de donn√©es optimis√©e
-   [x] Interface responsive

### Phase 2 - Business Logic üöß
-   [x] CRUD covoiturages
-   [x] Syst√®me de r√©servation
-   [ ] Notifications en temps r√©el
-   [ ] Syst√®me de paiement
-   [ ] API REST pour mobile

### Phase 3 - Advanced Features üìã
-   [ ] G√©olocalisation avec cartes
-   [ ] Chat entre utilisateurs
-   [ ] Application mobile (PWA)
-   [ ] Tests automatis√©s (PHPUnit)
-   [ ] CI/CD avec GitHub Actions

### Phase 4 - Performance & Scale üéØ
-   [ ] Cache Redis
-   [ ] CDN pour les assets
-   [ ] Load balancing
-   [ ] Monitoring avanc√©
-   [ ] Analytics utilisateurs

---

## ü§ù Contribution & Cr√©dits

**Projet acad√©mique** r√©alis√© dans le cadre de l'**ECF TP DWWM ‚Äì Studi**.

### Ressources et inspiration
-   [PHP Official Documentation](https://www.php.net/docs.php)
-   [Docker Documentation](https://docs.docker.com/)
-   [Bootstrap 5](https://getbootstrap.com/)
-   [SASS Guidelines](https://sass-guidelin.es/)

### Usage
üéì **Usage p√©dagogique uniquement** - Projet d'√©valuation professionnelle

---

## üìû Support & Contact

Pour toute question technique ou suggestion :

-   üìß **Email** : votre.email@domain.com
-   üêô **GitHub** : [Issues](https://github.com/votre-username/ecoride/issues)
-   üìù **Documentation** : [Wiki](https://github.com/votre-username/ecoride/wiki)

---

**EcoRide** - *Covoiturage responsable pour un futur durable* üå±

_Derni√®re mise √† jour : Juillet 2025 - Version 2.0_